(this.webpackJsonpbikeable=this.webpackJsonpbikeable||[]).push([[0],{109:function(e,t,n){},116:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(35),s=n.n(r),o=(n(90),n(16)),i=n(17),l=n(19),u=n(18),j=(n(91),n(30)),d=n(15),b=n(14),h=n(7),O=n(11),x=n(24),m=n(9),p=n.n(m),f=function(e,t,n,a,c){return p.a.post("/auth/register",{firstName:e,email:n,user:t,password:a,zipCode:c})},g=function(e,t){return p.a.post("/auth/login",{email:e,password:t})},v=function(e,t,n,a){return p.a.post("/auth/user/bike",{modelName:e,frame:t,type:n,gearset:a})},y=function(e){return p.a.post("/api/users",{zipCode:e})},C=function(){return p.a.get("/auth/messages")},N=function(){return p.a.get("/auth/gear")},S=function(){return p.a.get("/auth/logout")},A=(n(109),n(85)),w=Object(a.createContext)({coords1:{},coords2:{},start:"",end:"",waypoint:{},zipCode:NaN,found:!1,user:!1,summary:{},directions:[],logIn:function(){},logOut:function(){},setCoords:function(){},setWaypoint:function(){},setSummary:function(){},unmountMap:function(){},mountMap:function(){}}),k=n(1),M=function(e){var t=Object(d.g)(),n=Object(a.useState)(""),c=Object(b.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(""),i=Object(b.a)(o,2),l=i[0],u=i[1],m=Object(a.useState)(!1),p=Object(b.a)(m,2),f=p[0],v=p[1],y=Object(a.useContext)(w);return Object(k.jsxs)("div",{className:"Login",style:{backgroundImage:"url(".concat("/trailbike.jpg",")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},children:[Object(k.jsx)("div",{className:"cycle-container container",children:Object(k.jsx)("img",{src:"/opener127.png",alt:"logo",className:"cycle"})}),f&&Object(k.jsx)(A.a,{variant:"info",onClose:function(){return v(!1)},dismissible:!0,children:Object(k.jsx)("p",{children:"Incorrect Credentials, please try logging in again."})}),Object(k.jsx)(x.a,{children:Object(k.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),g(r,l).then((function(e){e.data.success&&(y.logIn(e.data.user),t.push("/dashboard"))})).catch((function(e){return v(!0)}))},className:"form",children:[Object(k.jsxs)(h.a.Group,{size:"lg",className:"email",controlId:"email",children:[Object(k.jsx)(h.a.Label,{children:"Email"}),Object(k.jsx)(h.a.Control,{autoFocus:!0,type:"email",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(k.jsxs)(h.a.Group,{size:"lg",className:"password",controlId:"password",children:[Object(k.jsx)(h.a.Label,{children:"Password"}),Object(k.jsx)(h.a.Control,{type:"password",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(k.jsx)(O.a,{block:!0,size:"lg",className:"loginButton",type:"submit",children:"Login"}),Object(k.jsxs)("p",{children:["Not a member?"," ",Object(k.jsxs)(j.b,{to:"/register",className:"signUp",children:[Object(k.jsx)("span",{className:"glyphicon glyphicon-plus-sign","aria-hidden":"true"})," ","Register here"]})]})]})})]})},I=(n(116),n(22)),L=n(12),D=function(e){var t=Object(d.g)(),n=Object(a.useState)(""),c=Object(b.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(""),i=Object(b.a)(o,2),l=i[0],u=i[1],m=Object(a.useState)(""),p=Object(b.a)(m,2),g=p[0],v=p[1],y=Object(a.useState)(""),C=Object(b.a)(y,2),N=C[0],S=C[1],A=Object(a.useState)(""),w=Object(b.a)(A,2),M=w[0],D=w[1];return Object(k.jsxs)("div",{style:{backgroundImage:"url(".concat("/open-trail.jpg",")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"auto 100%"},className:"Register",children:[Object(k.jsx)("h1",{children:"Join BikeAble Today!"}),Object(k.jsx)(x.a,{children:Object(k.jsxs)(I.a,{children:[Object(k.jsx)(L.a,{xs:"12",lg:"4",children:Object(k.jsxs)("p",{children:["BikeAble allows cyclists of all skill levels to connect and share their rides in a more relaxed environment. ",Object(k.jsx)("br",{}),"Rather than shaving seconds off your trail time, we seek the roads less traveled. ",Object(k.jsx)("br",{}),"Activate your wanderlust!"]})}),Object(k.jsx)(L.a,{xs:"12",lg:"4"}),Object(k.jsx)(L.a,{xs:"12",lg:"4",children:Object(k.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),f(r,M,l,g,N).then((function(e){e.data.success&&t.push("/")}))},children:[Object(k.jsxs)(h.a.Group,{size:"lg",className:"formEntry",controlId:"firstName",children:[Object(k.jsx)(h.a.Label,{children:"First Name"}),Object(k.jsx)(h.a.Control,{autoFocus:!0,type:"firstName",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(k.jsxs)(h.a.Group,{size:"lg",className:"formEntry",controlId:"email",children:[Object(k.jsx)(h.a.Label,{children:"Email"}),Object(k.jsx)(h.a.Control,{autoFocus:!0,type:"email",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(k.jsxs)(h.a.Group,{size:"lg",className:"formEntry",controlId:"user",children:[Object(k.jsx)(h.a.Label,{children:"Username"}),Object(k.jsx)(h.a.Control,{autoFocus:!0,type:"user",value:M,onChange:function(e){return D(e.target.value)}})]}),Object(k.jsxs)(h.a.Group,{size:"lg",className:"formEntry",controlId:"password",children:[Object(k.jsx)(h.a.Label,{children:"Password"}),Object(k.jsx)(h.a.Control,{type:"password",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(k.jsxs)(h.a.Group,{size:"lg",className:"formEntry",controlId:"zipCode",children:[Object(k.jsx)(h.a.Label,{children:"Zip Code"}),Object(k.jsx)(h.a.Control,{type:"zipCode",value:N,onChange:function(e){return S(e.target.value)}})]}),Object(k.jsx)(O.a,{block:!0,size:"lg",className:"signUp",type:"submit",children:"Sign Up!"}),Object(k.jsxs)("h5",{children:["Already a member?"," ",Object(k.jsx)(j.b,{to:"/",children:"Login Here"})]})]})})]})})]})},R=n(8),B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).componentDidMount=function(){e.context.setSummary(e.props.summary.distance,e.props.summary.duration,e.props.directions)},e.saveRoute=function(){var t;t=e.context.waypoint?{lat:e.context.waypoint.lat,lon:e.context.waypoint.lng}:{},p()({method:"post",url:"/auth/user/route",headers:{},data:{start:{lat:e.context.coords1.lat,lon:e.context.coords1.lng,name:e.context.start},end:{lat:e.context.coords2.lat,lon:e.context.coords2.lng,name:e.context.end},waypoint:t,summary:{distance:e.props.summary.distance,duration:e.props.summary.duration},directions:e.props.directions}}).then((function(e){e.success&&alert("Route Saved!")}))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.directions.map((function(e,t){var n,a=parseInt(3.28084*e.length);n=0===a?"":a>5280?"Continue for ".concat(parseFloat(a/5280).toFixed(2)," miles."):"Continue for ".concat(a," feet.");var c="".concat(e.instruction.split("Go")[0]," ").concat(n);return Object(k.jsx)("li",{children:c},t)}));return Object(k.jsxs)("div",{children:[Object(k.jsxs)("h4",{className:"text-center",children:[this.props.label," ",Object(k.jsx)("span",{children:Object(k.jsx)(O.a,{onClick:function(){return e.saveRoute()},children:"Save Route"})})]}),Object(k.jsx)("ol",{children:t}),Object(k.jsxs)("p",{children:["Total Distance: ",this.props.summary.distance," miles",Object(k.jsx)("br",{}),"Travel Time: ",this.props.summary.duration]})]})}}]),n}(a.Component);B.contextType=w;var F=B,P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).mapRef=c.a.createRef(),a.componentDidMount=function(){var e=window.H,t=new e.service.Platform({apikey:"HNUr88gYr5pMHAxGfu2rSzHK6R2okLg7Tymzq3dH-24"}),n=t.createDefaultLayers(),c=new e.Map(a.mapRef.current,n.vector.normal.map,{center:{lat:parseFloat((a.props.lat1+a.props.lat2)/2),lng:parseFloat((a.props.lng1+a.props.lng2)/2)},zoom:10,pixelRatio:window.devicePixelRatio||1}),r=new e.map.Icon("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA70lEQVRIie2TXQ2EMBCEPwmVgISTgISTgAQcIAEpSEBCJSABCdxDu2Fb/nqlJPdwk/BA05nZTmbhh/ECLDAC9RMGI7D4b3rCYFIGtoSgARqgBypcLBPuJU0J8YF14qWE6Jm4fG0Jgz1xnf+tFr13xC3uVTUwq/M5x6A/EBcYoPPnS46BUWSZ0pzczYIhXKohVwhc9Sxu0oGwJTquVE6AoyrqLY0NUjjgXfcuxn3XBqmczSQ9LncdiVRQG6RygLDP0oYqmig2SOUAYRVlmk6dSaaamMoBrvPs2OJrjj24GG/vLU7L2mnr/682NIfzx4oPBuKx2TTKQ+YAAAAASUVORK5CYII="),s=new e.map.Icon("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAmCAYAAABQ3RJZAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPbSURBVFhH7ZddSJNRGMfPNp06XX7P6dBUsMxtaZqB4kV3oSYRBX3cGmrphfci6l0aBIEKGng1MCUNirzJAr9IKWpqc4UfpHP5lSY6N8199D/zUBaBntfa1fuDw7v3Oe+7/d/zPv/nPCMiIiIigpCxo0/weDySuLi40KysLFdfX5+bhbmRsqNPGBoaisWhys/P79xeRBgSdhQEXbnW1tagjY2Nv35PTEwMWVpaIkFBQRKlUhk3Pj5+a2xs7FpGRsadhoaG5+wybgSLbmlp8Q8ODs4ZHR29OTs7q8EDsBlC5HI5iY6OJpGRkcTtdhOr1UomJydVExMTaRqNZr6srOxqSUmJiV3ODZdourIGg0EdEBBgX1xc1LW3t983mUxntra2/NglXiQSCZFKpUQm27OMy+UiTqeT3k9yc3PfFBQUXKyqqlrxTgqAy4ghISGq3t7eBrvdrkd+xoyMjFyHYDl9mP0DqyuBUAmEegf9TOP+/v6e9PT0l2lpaU97enq+s6/lhsuI+HE5XnP68PDwjZycnLMw1G8rfBBUtFqttpSXl2+xkCC4RDscjq8pKSmTCwsLxxMSEvKRt1z3403Z4+Pjp5E+vwwgAN6S9z0xMXHUZrO58dqDk5KSuDwB47ogep6dCoZLdF1dnTs2NvYDStju1NQUSU1N9RrusKD8KZFaxfCCmoUEwbvSJDk5eQJ5uUhFw1S0BrOZg4GBZag+lx+Ajo4OPQtzwy0aqWGNiooaM5vNnvDwcG8t5mFzczOgu7v7SlNT08O2trYLNTU13Bq4b5iennbodDrz+vq6e3V1lWCzYDOHZ3t7W4YUye7q6rqNU8Ve9PBwi6Z5jVx+jQ3GgZ2Q6PX6n3lNqwI+u/ePPysFPVcoFNuZmZnvCwsLn2i1Wu56LajLKyoq2jUajZd2dnYi0LGRwcFBD3J7HQ9jCgsLe4HxDsOI9DGiq7PiAeUYttDQ0A144mN2dvaj/Pz8e9hwXhUXF3OLFtR71NfXK/v7+x/DjOcrKirMMBetv4a8vLwXWMm5tbU1F7uUREREKGZmZjRIJRntSVDnbUiPL7W1tbtHrddc0C25srLyrkqlslVXV5c0NzfraAPFpv873DlNoSuEXPwUGBgohTFPopqYS0tLd9n0f0eQaAqEvsWr/wozavH6Q1jYJwgWjRz9DJOZcdTCdAks7BMEi7ZYLN56jc0ifHl5+RQL+wTBolGvnehMDWicvkH06c7OTp/9SRYsmoIt3YL6vIK/XCcGBga4euujcCTR2DxW0TQ9Q4s6B1P6ruYeFTRsxxobG9W0drOQiIiIiMi/gpAf0NqdrhhoZj0AAAAASUVORK5CYII=");window.addEventListener("resize",(function(){return c.getViewPort().resize()}));new e.mapevents.Behavior(new e.mapevents.MapEvents(c)),e.ui.UI.createDefault(c,n);a.setState({map:c});var o={routingMode:"fast",transportMode:"bicycle",origin:"".concat(a.props.lat1,",").concat(a.props.lng1),destination:"".concat(a.props.lat2,",").concat(a.props.lng2),return:"polyline,turnByTurnActions,actions,instructions,travelSummary"};a.props.wayLat&&a.props.wayLng&&(o.waypoint="".concat(a.props.wayLat,",").concat(a.props.wayLng)),t.getRoutingService(null,8).calculateRoute(o,(function(t){console.log(t.routes[0]);var n,o,i,l=0,u=0,j=[];if(t.routes.length){for(var d=0;d<t.routes[0].sections.length;d++){var b=t.routes[0].sections[d],h=e.geo.LineString.fromFlexiblePolyline(b.polyline);i=new e.map.Polyline(h,{style:{strokeColor:"blue",lineWidth:3}}),l+=b.travelSummary.length,u+=b.travelSummary.duration,j=j.concat(b.actions)}var O=t.routes[0].sections;O.length>1&&(j=j.filter((function(e){return"arrive"!==e.action}))).push(O[O.length-1].action),n=new e.map.Marker(O[0].departure.place.location,{icon:r}),o=new e.map.Marker(O[O.length-1].arrival.place.location,{icon:s}),a.setState({label:"Navigation Success!",directions:j,summary:{distance:parseFloat(l/1609.34).toFixed(2),duration:"".concat(Math.floor(u/60)," minutes ").concat(u%60," seconds")},map:c}),console.log(a.state.directions[0]),c.addObjects([i,n,o]),c.getViewModel().setLookAtData({bounds:i.getBoundingBox()})}}),(function(e){alert(e.message)}))},a.componentWillUnmount=function(){a._isMounted=!1},a.state={map:null,label:"",directions:[],summary:{}},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.label;return Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"map",ref:this.mapRef,style:{height:"600px"}}),t?Object(k.jsx)(F,{label:e.state.label,directions:e.state.directions,summary:e.state.summary}):null]})}}]),n}(a.Component),T=n(69),G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).componentDidMount=function(){p.a.get("https://www.refugerestrooms.org/api/v1/restrooms/by_location",{params:{page:1,lat:parseFloat((e.context.coords1.lat+e.context.coords2.lat)/2),lng:parseFloat((e.context.coords1.lng+e.context.coords2.lng)/2)}}).then((function(t){e.setState({restrooms:t.data,coords1:e.context.coords1,coords2:e.context.coords2})}))},e.setWaypoint=function(t,n){e.context.unmountMap(),e.context.setWaypoint(t,n),e.context.mountMap()},e.state={restrooms:[]},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.restrooms.map((function(t,n){var a="",c="";return a=t.directions?"Directions: ".concat(t.directions):"",c=t.comments?"Comments: ".concat(t.comments):"",Object(k.jsxs)(R.a,{children:[Object(k.jsxs)(R.a.Header,{children:[" ",t.name," "]}),Object(k.jsxs)(R.a.Body,{children:[Object(k.jsxs)(R.a.Title,{children:[" ",t.street," ",t.city," "]}),Object(k.jsxs)(R.a.Text,{children:[a," ",Object(k.jsx)("br",{}),c]}),Object(k.jsx)(O.a,{onClick:function(){return e.setWaypoint(t.latitude,t.longitude)},children:"Set as detour"})]})]},n)}));return Object(k.jsx)("div",{children:t})}}]),n}(a.Component);G.contextType=w;var U=G,E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleInputChange=function(t){var n=t.target,a=n.name,c=n.value;c.length>5&&p.a.get("/here/autocomplete/".concat(c)).then((function(t){console.log(t);var n=t.data.items[0].position.lat,c=t.data.items[0].position.lng;switch(a){case"start":e.setState({start:t.data.items[0].title,coords1:{lat:n,lng:c}}),e.context.unmountMap();break;case"end":e.setState({end:t.data.items[0].title,coords2:{lat:n,lng:c}}),e.context.unmountMap();break;default:console.log("Failed to get coordinates.")}}))},e.handleSubmit=function(t){t.preventDefault(),e.context.setCoords(e.state.coords1,e.state.coords2,e.state.start,e.state.end)},e.componentDidUpdate=function(){},e.state={start:"",end:"",coords1:{},coords2:{}},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.context.found;return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsxs)(I.a,{children:[Object(k.jsxs)(L.a,{xs:12,md:8,children:[Object(k.jsxs)(R.a,{className:"getRoute mt-1",children:[Object(k.jsx)(R.a.Title,{className:"mx-auto",children:"Get a route!"}),Object(k.jsx)(R.a.Body,{children:Object(k.jsxs)(h.a,{onSubmit:this.handleSubmit.bind(this),children:[Object(k.jsx)(h.a.Group,{className:"justify-content-start",children:Object(k.jsx)(T.DebounceInput,{className:"input-group",placeholder:"Start",minLength:5,debounceTimeout:700,value:this.state.start,name:"start",onChange:this.handleInputChange})}),Object(k.jsx)(h.a.Group,{className:"justify-content-start",children:Object(k.jsx)(T.DebounceInput,{className:"input-group",placeholder:"Destination",minLength:5,debounceTimeout:700,name:"end",value:this.state.end,onChange:this.handleInputChange})}),Object(k.jsx)(O.a,{block:!0,size:"med",className:"mb-3",type:"submit",children:"Map My Route!"})]})})]}),t?Object(k.jsx)(P,{lat1:e.context.coords1.lat,lat2:e.context.coords2.lat,lng1:e.context.coords1.lng,lng2:e.context.coords2.lng,wayLat:e.context.waypoint.lat,wayLng:e.context.waypoint.lng}):null]}),Object(k.jsx)(L.a,{xs:12,md:4,children:t?Object(k.jsx)(U,{}):Object(k.jsx)("div",{children:Object(k.jsx)("h3",{children:"Map a route for options."})})})]})})}}]),n}(a.Component);E.contextType=w;var z=E,K=(n(119),n(120),n(81)),q=n(49),Y=n(10);var Z=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(w);return n?Object(k.jsx)(d.a,{to:"/"}):Object(k.jsxs)(q.a,{className:"navbar",expand:"lg",children:[Object(k.jsx)(q.a.Brand,{href:"/dashboard",children:Object(k.jsx)(K.a,{className:"logo",src:"/opener127.png"})}),Object(k.jsx)(q.a.Toggle,{"aria-controls":"navbar-nav"}),Object(k.jsx)(q.a.Collapse,{id:"navbar-nav",children:Object(k.jsxs)(Y.a,{className:"ml-auto",children:[Object(k.jsx)(Y.a.Link,{href:"/dashboard",children:"Dashboard"}),Object(k.jsx)(Y.a.Link,{href:"/discover",children:"Discover"}),Object(k.jsx)(Y.a.Link,{href:"/user",children:"Profile"}),Object(k.jsx)(O.a,{variant:"outline-danger",onClick:function(){S().then((function(e){e.data.success&&(r.logOut(),c(!0))}))},children:"Logout"})]})})]})},Q=n(38),W=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),o=Object(b.a)(s,2),i=o[0],l=o[1],u=Object(a.useState)(""),j=Object(b.a)(u,2),d=j[0],x=j[1],m=Object(a.useState)(""),p=Object(b.a)(m,2),f=p[0],g=p[1],y=Object(a.useState)(""),C=Object(b.a)(y,2),S=C[0],A=C[1];if(Object(a.useEffect)((function(){N().then((function(e){r(e.data)}))}),[]),0===n.length)return Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("h2",{children:"Save your gear!"}),Object(k.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),v(f,S,d,i).then((function(e){n.push(e.data)}))},className:"col-xs-12 col-md-10 col-lg-8",children:[Object(k.jsxs)(h.a.Group,{children:[Object(k.jsx)(h.a.Label,{children:"Bike Model (if applicable)"}),Object(k.jsx)(h.a.Control,{type:"model",placeholder:"Make or Model",value:f,onChange:function(e){return g(e.target.value)}})]}),Object(k.jsxs)(h.a.Group,{children:[Object(k.jsx)(h.a.Label,{children:"Frame"}),Object(k.jsxs)(h.a.Control,{as:"select",type:"frame",placeholder:"Type of frame",value:S,onChange:function(e){return A(e.target.value)},children:[Object(k.jsx)("option",{children:"Steel"}),Object(k.jsx)("option",{children:"Chromoly"}),Object(k.jsx)("option",{children:"Carbon"}),Object(k.jsx)("option",{children:"Aluminum"}),Object(k.jsx)("option",{children:"Titanium"})]})]}),Object(k.jsxs)(h.a.Group,{children:[Object(k.jsx)(h.a.Label,{children:"Type"}),Object(k.jsxs)(h.a.Control,{as:"select",type:"type",placeholder:"Type of bike",value:d,onChange:function(e){return x(e.target.value)},children:[Object(k.jsx)("option",{children:"Cyclocross"}),Object(k.jsx)("option",{children:"BMX"}),Object(k.jsx)("option",{children:"Road"}),Object(k.jsx)("option",{children:"Hybrid"}),Object(k.jsx)("option",{children:"Mountain"}),Object(k.jsx)("option",{children:"Gravel"}),Object(k.jsx)("option",{children:"Cruiser"}),Object(k.jsx)("option",{children:"Touring"}),Object(k.jsx)("option",{children:"Recumbent"})]})]}),Object(k.jsxs)(h.a.Group,{children:[Object(k.jsx)(h.a.Label,{children:"Gearset"}),Object(k.jsx)(h.a.Control,{type:"gearset",placeholder:"Gearset",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(k.jsx)(O.a,{type:"submit",block:!0,size:"med",children:"Add bike"})]})]});var w=n.map((function(e,t){return Object(k.jsxs)(R.a,{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3",children:[Object(k.jsx)(R.a.Header,{children:e.modelName}),Object(k.jsx)(R.a.Img,{}),Object(k.jsxs)(R.a.Body,{children:[Object(k.jsxs)(R.a.Title,{children:[e.frame," ",e.type," bike"]}),Object(k.jsxs)(R.a.Text,{children:["Gearset: ",e.gearset]})]})]},e._id)}));return Object(k.jsx)("div",{children:w})},J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).componentDidMount=function(){p.a.get("/auth/user/routes").then((function(t){e.setState({routes:t.data})}))},e.delete=function(t){p.a.delete("/auth/routes/".concat(t)).then((function(n){var a=e.state.routes.filter((function(e){return e._id!==t}));e.setState({routes:a})}))},e.favorite=function(t){p.a.post("/auth/routes/fav/".concat(t)).then((function(e){})),e.btn.setAttribute("disabled","disabled")},e.mapRoute=function(t){e.setState({show:!0,chosen:t}),console.log(t)},e.state={routes:[],show:!1,chosen:{}},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(0===this.state.routes.length)return Object(k.jsx)(x.a,{children:Object(k.jsx)(I.a,{children:Object(k.jsx)("h2",{children:"No routes saved at the moment. Feel free to add one or many."})})});var t=this.state.routes.map((function(t,n){var a;return a=t.favorited?null:Object(k.jsx)(O.a,{ref:function(t){e.btn=t},onClick:function(){return e.favorite(t._id)},children:"Favorite"}),Object(k.jsxs)(R.a,{className:"col-sm-6 col-lg-4",children:[Object(k.jsxs)(R.a.Header,{children:[" ",t.start.name," - ",t.end.name," "]}),Object(k.jsxs)(R.a.Body,{children:[Object(k.jsxs)(R.a.Text,{children:[t.summary.distance," miles",Object(k.jsx)("br",{}),t.summary.duration]}),Object(k.jsx)(O.a,{onClick:function(){return e.delete(t._id)},children:"Delete"}),a,Object(k.jsx)(O.a,{onClick:function(){return e.mapRoute(t)},children:"Show Map"})]})]},t._id)}));return Object(k.jsxs)(x.a,{children:[e.state.show?Object(k.jsx)(P,{lat1:e.state.chosen.start.lat,lat2:e.state.chosen.end.lat,lng1:e.state.chosen.start.lon,lng2:e.state.chosen.end.lon,wayLat:e.state.chosen.waypoint.lat,wayLng:e.state.chosen.waypoint.lon}):null,Object(k.jsx)(I.a,{children:Object(k.jsx)(L.a,{className:"d-flex align-content-stretch flex-wrap",children:t})})]})}}]),n}(a.Component);J.contextType=w;var H=J,V=n(55),X=n(82),_=n(25),$=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){p.a.get("/auth/user/zipcode").then((function(e){p.a.get("https://bikewise.org/api/v2/incidents",{params:{occurred_after:a.state.recent,proximity:e.data,proximity_square:20}}).then((function(e){console.log(e.data),a.setState({incidents:e.data.incidents,filteredIncidents:e.data.incidents})}))}))},a.filter=function(e){var t=0;switch(e){case"week":t=Math.floor(Date.now()/1e3)-604800;break;case"month":t=Math.floor(Date.now()/1e3)-2628e3;break;default:t=Math.floor(Date.now()/1e3)-3154e4}var n=a.state.incidents.filter((function(e){return e.occurred_at>t}));a.setState({filteredIncidents:n,filtered:e})},a.state={zipcode:NaN,incidents:[],recent:Math.floor(Date.now()/1e3)-3154e4,filteredIncidents:[],filtered:"year"},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.filteredIncidents.map((function(e,t){var n=new Date(1e3*e.occurred_at),a="".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()]," ").concat(n.getDate()," ").concat(n.getFullYear());return Object(k.jsxs)(R.a,{className:"".concat(e.type," col-xs-12 col-sm-6 col-md-4 col-lg-3"),children:[Object(k.jsxs)(R.a.Header,{children:[" ",e.type," "]}),Object(k.jsx)(V.a,{src:e.media.image_url_thumb||"https://via.placeholder.com/300"}),Object(k.jsxs)(R.a.Body,{children:[Object(k.jsxs)(R.a.Title,{children:[" ",e.title," "]}),Object(k.jsxs)(R.a.Subtitle,{children:[" At: ",e.address," On: ",a]}),Object(k.jsx)("br",{}),Object(k.jsx)(R.a.Text,{children:e.description})]})]},t)}));return Object(k.jsxs)("div",{className:"mt-1",children:[Object(k.jsx)("h4",{children:"Incidents in your area"}),Object(k.jsxs)(X.a,{id:"dateFilter",title:"In the past ".concat(this.state.filtered),children:[Object(k.jsx)(_.a.Item,{onClick:function(){return e.filter("week")},children:"Week"}),Object(k.jsx)(_.a.Item,{onClick:function(){return e.filter("month")},children:"Month"}),Object(k.jsx)(_.a.Item,{onClick:function(){return e.filter("year")},children:"Year"})]}),Object(k.jsx)("div",{className:"d-flex align-content-stretch flex-wrap",children:t})]})}}]),n}(a.Component),ee=n(83),te=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).componentDidMount=function(){C().then((function(t){e.setState({messages:t.data,filtered:t.data})}))},e.state={messages:[],filtered:[]},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(0===this.state.messages.length)return Object(k.jsx)(x.a,{children:Object(k.jsx)(I.a,{children:Object(k.jsx)("h2",{children:"Your inbox is currently empty, check back later!"})})});var t=this.state.filtered.map((function(t,n){return Object(k.jsxs)("li",{children:["From: ",t.from," Subject: ",t.subject," Date: ",t.createdAt,Object(k.jsx)("span",{children:Object(k.jsx)(O.a,{onClick:function(){return e.expand(t._id)},children:"Read"})})]},t._id)}));return Object(k.jsx)("div",{children:Object(k.jsx)("ul",{children:t})})}}]),n}(a.Component),ne=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).componentDidMount=function(){p.a.get("/auth/user").then((function(t){t.data.name||e.setState({redirect:!0})}))},e.state={redirect:!1},e}return Object(i.a)(n,[{key:"render",value:function(){return this.state.redirect?Object(k.jsx)(d.a,{to:"/"}):Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(Z,{}),Object(k.jsx)(Q.a.Container,{defaultActiveKey:"first",transition:!1,className:"dashboard",children:Object(k.jsxs)(I.a,{children:[Object(k.jsx)(L.a,{sm:12,md:3,lg:2,className:"d-none d-md-block",children:Object(k.jsxs)(Y.a,{variant:"pills",className:"flex-column",children:[Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"first",children:"Routing"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"second",children:"Saved Routes"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"third",children:"Messages"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"fourth",children:"Incidents Near Me"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"fifth",children:"My Gear"})})]})}),Object(k.jsx)(L.a,{sm:12,className:"d-md-none d-sm-block",children:Object(k.jsxs)(ee.a,{id:"dropdown",title:"Dashboard Panel",children:[Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"first",children:"Routing"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"second",children:"Saved Routes"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"third",children:"Messages"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"fourth",children:"Incidents Near Me"})}),Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(Y.a.Link,{eventKey:"fifth",children:"My Gear"})})]})}),Object(k.jsx)(L.a,{children:Object(k.jsxs)(Q.a.Content,{children:[Object(k.jsx)(Q.a.Pane,{eventKey:"first",mountOnEnter:"true",unmountOnExit:"true",children:Object(k.jsx)(z,{})}),Object(k.jsx)(Q.a.Pane,{eventKey:"second",mountOnEnter:"true",unmountOnExit:"true",children:Object(k.jsx)(H,{})}),Object(k.jsx)(Q.a.Pane,{eventKey:"third",mountOnEnter:"true",unmountOnExit:"true",children:Object(k.jsx)(te,{})}),Object(k.jsx)(Q.a.Pane,{eventKey:"fourth",mountOnEnter:"true",unmountOnExit:"true",children:Object(k.jsx)($,{})}),Object(k.jsx)(Q.a.Pane,{eventKey:"fifth",mountOnEnter:"true",unmountOnExit:"true",children:Object(k.jsx)(W,{})})]})})]})})]})}}]),n}(a.Component);ne.contextType=w;var ae=ne,ce=(n(122),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).componentDidMount=function(){p.a.get("/auth/user").then((function(t){t.data.name||e.setState({redirect:!0})}))},e.state={user:{},redirect:!1},e}return Object(i.a)(n,[{key:"render",value:function(){return this.state.redirect?Object(k.jsx)(d.a,{to:"/"}):Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(Z,{}),Object(k.jsx)(x.a,{children:Object(k.jsxs)(I.a,{children:[Object(k.jsxs)(L.a,{children:[Object(k.jsx)(I.a,{children:Object(k.jsx)(L.a,{children:Object(k.jsx)("h1",{children:"About Me"})})}),Object(k.jsx)(I.a,{children:Object(k.jsx)(L.a,{children:Object(k.jsx)("h3",{children:"My Gear"})})})]}),Object(k.jsx)(L.a,{children:Object(k.jsx)("h3",{children:"My Favorite Routes"})})]})})]})}}]),n}(a.Component));ce.contextType=w;var re=ce,se=n(84);n(123);var oe=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),o=Object(b.a)(s,2),i=o[0],l=o[1],u=Object(a.useState)(!1),j=Object(b.a)(u,2),m=j[0],f=j[1];return Object(a.useEffect)((function(){p.a.get("/auth/user").then((function(e){e.data.name||f(!0)}))})),m?Object(k.jsx)(d.a,{to:"/"}):Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)(Z,{}),Object(k.jsxs)(se.a,{children:[Object(k.jsx)("h1",{children:"Users in Your Area!"}),Object(k.jsxs)(x.a,{children:[Object(k.jsxs)(h.a,{children:[Object(k.jsx)(h.a.Control,{onChange:function(e){return r(e.target.value)},type:"text",className:"zipCode",placeholder:"Enter your Zip Code"}),Object(k.jsx)(O.a,{onClick:function(e){e.preventDefault(),y(n).then((function(e){console.log(e.data),l(e.data),r("")})).catch((function(e){return console.log(e)}))},block:!0,size:"lg",className:"zipButton",children:"Find Cyclers"})]}),i.length?i.map((function(e,t){return Object(k.jsx)("div",{children:Object(k.jsx)("ul",{children:Object(k.jsxs)("li",{children:["First Name: ".concat(e.firstName,",")," "," username: ".concat(e.username,",")," ZipCode: ".concat(e.zipCode,",")," "]})})})})):"No users found"]})]})]})},ie=function(){return Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsx)("div",{className:"row",children:Object(k.jsx)("div",{className:"col-md-12",children:Object(k.jsx)("div",{className:"jumbotron",children:Object(k.jsx)("h1",{children:"404 Page Not Found"})})})})})},le=function(e){var t=e.match,n=e.location;return console.log(t),console.log(n),Object(k.jsx)("div",{})},ue=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).logIn=function(t){e.setState({user:t})},e.logOut=function(){e.setState({user:{}})},e.setCoords=function(t,n,a,c){e.setState({coords1:t,coords2:n,found:!0,start:a,end:c})},e.setWaypoint=function(t,n){e.setState({waypoint:{lat:t,lng:n}})},e.setSummary=function(t,n,a){e.setState({summary:{distance:t,duration:n},directions:a})},e.unmountMap=function(){e.setState({found:!1})},e.mountMap=function(){e.setState({found:!0})},e.state={coords1:{lat:NaN,lng:NaN},coords2:{lat:NaN,lng:NaN},start:"",end:"",waypoint:{lat:NaN,lng:NaN},zipCode:NaN,found:!1,user:{},summary:{distance:NaN,duration:""},directions:[],logIn:e.logIn,logOut:e.logOut,setCoords:e.setCoords,setWaypoint:e.setWaypoint,setSummary:e.setSummary,unmountMap:e.unmountMap,mountMap:e.mountMap},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(k.jsx)(j.a,{children:Object(k.jsx)("div",{children:Object(k.jsx)(w.Provider,{value:this.state,children:Object(k.jsxs)(d.d,{children:[Object(k.jsx)(d.b,{exact:!0,path:"/",component:M}),Object(k.jsx)(d.b,{exact:!0,path:"/dashboard",component:ae}),Object(k.jsx)(d.b,{exact:!0,path:"/user",component:re}),Object(k.jsx)(d.b,{path:"/user/:userId",component:le}),Object(k.jsx)(d.b,{exact:!0,path:"/discover",component:oe}),Object(k.jsx)(d.b,{exact:!0,path:"/register",component:D}),Object(k.jsx)(d.b,{component:ie})]})})})})}}]),n}(a.Component),je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(124);n(125).config(),s.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(ue,{})}),document.getElementById("root")),je()},90:function(e,t,n){},91:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.c23e1e4e.chunk.js.map